import fs from "fs/promises";
import { Project } from "ts-morph";
import { complete, errored, fromPromise, isErrored } from "@attio/fetchable-npm";
export async function getFileExports(filePath) {
    const contentResult = await fromPromise(fs.readFile(filePath));
    if (isErrored(contentResult)) {
        return errored({ code: "FILE_NOT_READABLE", cause: contentResult.error });
    }
    const content = contentResult.value.toString();
    const tsProject = new Project({ useInMemoryFileSystem: true });
    const appSourceFile = tsProject.createSourceFile(filePath, content);
    return complete(appSourceFile.getExportedDeclarations());
}
