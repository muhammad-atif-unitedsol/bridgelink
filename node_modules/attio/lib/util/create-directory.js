import { constants, promises as fs } from "fs";
import { join } from "path";
import { complete, errored } from "@attio/fetchable-npm";
export const createDirectory = async (name) => {
    const currentDir = process.cwd();
    const newPath = join(currentDir, name);
    try {
        if (await fs
            .access(newPath)
            .then(() => true)
            .catch(() => false)) {
            return errored({
                code: "DIRECTORY_ALREADY_EXISTS",
                path: newPath,
            });
        }
        await fs.access(currentDir, constants.W_OK);
        await fs.mkdir(newPath);
        return complete(newPath);
    }
    catch {
        return errored({
            code: "WRITE_ACCESS_DENIED",
            path: name,
        });
    }
};
