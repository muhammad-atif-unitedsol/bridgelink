import { promises as fs } from "fs";
import { findNodeModulesPath } from "./find-node-modules-path.js";
export async function updateEnvTypes(variables) {
    const filePath = await findNodeModulesPath(["lib", "server", "env.d.ts"]);
    if (!filePath) {
        return;
    }
    const keys = Object.keys(variables);
    const envTypes = keys.length === 0
        ? `export declare const env: Record<string,string>\n`
        : `export declare const env: {
${keys.map((key) => `  ${key}: string`).join("\n")}}\n`;
    await fs.writeFile(filePath, envTypes);
}
