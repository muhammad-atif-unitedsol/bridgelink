import dotenv from "dotenv";
import { promises as fs } from "fs";
const fileExists = async (path) => {
    try {
        await fs.access(path);
        return true;
    }
    catch {
        return false;
    }
};
const PATH = ".env";
export async function loadEnv() {
    if (!(await fileExists(PATH)))
        return {};
    const contents = await fs.readFile(PATH, { encoding: "utf8" });
    try {
        return dotenv.parse(contents);
    }
    catch {
        throw new Error(`Failed to parse ${PATH}`);
    }
}
