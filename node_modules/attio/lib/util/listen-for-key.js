export function listenForKey(targetKey, onKeyPress) {
    let cleanupFunction;
    function handleKeyPress(data) {
        const rawKey = data.toString();
        const key = rawKey.trim().toLowerCase();
        if (key === "\u0003") {
            return;
        }
        if (key === targetKey.toLowerCase()) {
            onKeyPress();
        }
    }
    if (process.stdin.isTTY) {
        process.stdin.setRawMode(true);
        process.stdin.resume();
        process.stdin.setEncoding("utf8");
        process.stdin.on("data", handleKeyPress);
    }
    cleanupFunction = () => {
        if (process.stdin.isTTY) {
            process.stdin.removeListener("data", handleKeyPress);
            process.stdin.setRawMode(false);
            process.stdin.pause();
        }
    };
    return cleanupFunction;
}
