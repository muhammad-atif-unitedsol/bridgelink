import fs from "fs/promises";
import path from "path";
import { fromPromise, isErrored } from "@attio/fetchable-npm";
const APP_ENTRY_POINT_EXTENSIONS = ["ts", "tsx"];
export async function getAppEntryPoint(srcDirAbsolute) {
    const appEntryPoints = await Promise.all(APP_ENTRY_POINT_EXTENSIONS.map(async (extension) => {
        const filePath = path.join(srcDirAbsolute, `app.${extension}`);
        const contentResult = await fromPromise(fs.readFile(filePath));
        if (isErrored(contentResult)) {
            return null;
        }
        return {
            path: filePath,
            content: contentResult.value.toString(),
        };
    }));
    return appEntryPoints.find((entryPoint) => entryPoint !== null) ?? null;
}
