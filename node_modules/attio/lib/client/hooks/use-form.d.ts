import type { JSX } from "react";
import type { AttioRecord } from "../attio-record";
import type { DecoratedComboboxOption, DecoratedComboboxOptionsProvider, PlainComboboxOption, PlainComboboxOptionsProvider } from "../components/combobox";
import type { Fieldset } from "../components/fieldset";
import type { InputGroup } from "../components/input-group";
import type { PathTo, ValueOf } from "../forms/path";
import type { FormValue } from "../forms/value";
import type { ObjectSlug } from "../object-slug";
export type FormSchema = Record<string, FormValue>;
/**
 * Recursive type for validation errors that can be nested.
 * Each field can either be a string error message or a nested object of errors.
 */
export type ValidationErrors<T> = Partial<{
    [K in keyof T]: T[K] extends AttioRecord ? string : T[K] extends object ? ValidationErrors<T[K]> : string;
}>;
/**
 * A <Form> component that must wrap all the fields and provide a submit handler.
 *
 * @example
 * ```tsx
 * <Form onSubmit={(values) => {
 *   console.log(values)
 * }}>
 *   <TextInput name="name" label="Name" />
 *   <NumberInput name="age" label="Age" />
 *   <Checkbox name="isActive" label="Is Active" />
 *   <Toggle name="isExpress" label="Is Express" />
 *   <SubmitButton label="Submit" />
 * </Form>
 * ```
 */
type Form<TSchema extends FormSchema> = (props: {
    /** The contents of the form, including layout and input components */
    children: React.ReactNode;
    /**
     * The function to call when the form is submitted.
     *
     * `onSubmit` will NOT be called if there are validation errors.
     */
    onSubmit: (values: ValueOf<TSchema>) => void | Promise<void>;
}) => JSX.Element;
/**
 * A text input field.
 */
type TextInput<TSchema extends FormSchema> = (props: {
    /** The type of the input field. Defaults to "text". */
    type?: "text" | "email" | "password" | "tel" | "url";
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"name"` or `"address.street"` */
    name: PathTo<TSchema, "string">;
    /** The optional placeholder text of the input field */
    placeholder?: string;
    /** Whether the input field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A number input field.
 */
type NumberInput<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"age"` or `"shipping.cost"` */
    name: PathTo<TSchema, "number">;
    /** The optional placeholder text of the input field */
    placeholder?: string;
    /** Whether the input field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A rich text input field.
 */
type RichTextInput<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"name"` or `"address.street"` */
    name: PathTo<TSchema, "string">;
    /** The optional placeholder text of the input field */
    placeholder?: string;
    /** Whether the input field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A radio group item.
 */
type RadioGroupItem = (props: {
    /** The value of the radio item */
    value: string;
    /** The label of the radio item */
    label: string;
}) => JSX.Element;
/**
 * A radio group input field.
 *
 * @experimental This component is experimental and should not be used yet.
 */
type RadioGroup<TSchema extends FormSchema> = ((props: {
    /** The path to the value of the radio group field, e.g. "department" or "shipping.method" */
    name: PathTo<TSchema, "string">;
    /** Whether the radio group is disabled */
    disabled?: boolean;
    /** The radio group items */
    children: React.ReactNode;
}) => JSX.Element) & {
    Item: RadioGroupItem;
};
/**
 * A checkbox input field.
 */
type Checkbox<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"is_active"` or `"shipping.is_express"` */
    name: PathTo<TSchema, "boolean">;
    /** Whether the input field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A toggle input field.
 */
type Toggle<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"is_active"` or `"shipping.is_express"` */
    name: PathTo<TSchema, "boolean">;
    /** Whether the input field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A date time input field.
 */
type DateTimeInput<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"check_in_time"` or `"shipping.drop_off_time"` */
    name: PathTo<TSchema, "date-time">;
    /** Whether the input field is disabled */
    disabled?: boolean;
    /** The optional placeholder text of the input field */
    placeholder?: string;
}) => JSX.Element;
/**
 * A date (YYYY-MM-DD) input field.
 */
type PlainDateInput<TSchema extends FormSchema> = (props: {
    /** The label of the input field */
    label: string;
    /** The path to the value of the input field, e.g. `"dob"` or `"shipping.date"` */
    name: PathTo<TSchema, "plain-date">;
    /** Whether the input field is disabled */
    disabled?: boolean;
    /** The optional placeholder text of the input field */
    placeholder?: string;
}) => JSX.Element;
/**
 * Base props common to all combobox variants.
 */
export interface BaseComboboxProps<TSchema extends FormSchema> {
    /** The label of the combobox field */
    label: string;
    /** The path to the value of the combobox field, e.g. `"mode"` or `"shipping.method"` */
    name: PathTo<TSchema, "string">;
    /**
     * The optional placeholder text for the search input
     *
     * @default "Search..."
     */
    searchPlaceholder?: string;
    /** Whether the combobox field is disabled */
    disabled?: boolean;
}
/**
 * Props for decorated combobox variant.
 */
export interface DecoratedComboboxProps {
    /**
     * If decorated, the combobox will be require decorated options. Defaults to true.
     */
    decorated: true;
    /**
     * The options of the combobox field
     *
     * Either an array of options, or a provider that asynchronously fetches options.
     */
    options: Array<DecoratedComboboxOption> | DecoratedComboboxOptionsProvider;
    /**
     * The optional placeholder text or option of the combobox field
     **/
    placeholder?: string | Omit<DecoratedComboboxOption, "value">;
}
/**
 * Props for plain combobox variant.
 */
export interface PlainComboboxProps {
    /**
     * If not decorated, the combobox will be plain. Defaults to false.
     */
    decorated?: false;
    /**
     * The options of the combobox field
     *
     * Either an array of options, or a provider that asynchronously fetches options.
     */
    options: Array<PlainComboboxOption> | PlainComboboxOptionsProvider;
    /**
     * The optional placeholder text or option of the combobox field
     **/
    placeholder?: string;
}
/**
 * A combobox input field.
 */
type Combobox<TSchema extends FormSchema> = (props: BaseComboboxProps<TSchema> & (DecoratedComboboxProps | PlainComboboxProps)) => JSX.Element;
type AttioRecordCombobox<TSchema extends FormSchema> = (props: {
    /** The label of the Attio record combobox field */
    label: string;
    /** The path to the value of the Attio record combobox field, e.g. `"company"` or `"team.staffManager"` */
    name: PathTo<TSchema, "attio-record">;
    /** The optional placeholder text for the Attio record combobox field */
    placeholder?: string;
    /**
     * The optional placeholder text for the search input
     *
     * @default "Search..."
     */
    searchPlaceholder?: string;
    /**
     * The slugs of Attio objects that can be selected.
     *
     * @default ["people", "companies", "deals", "workspaces", "users"]
     */
    object?: ObjectSlug | Array<ObjectSlug>;
    /** Whether the record combobox field is disabled */
    disabled?: boolean;
}) => JSX.Element;
type AttioUserCombobox<TSchema extends FormSchema> = (props: {
    /** The path to the value of the Attio user combobox field, e.g. `"assignedTo"` or `"team.manager"` */
    name: PathTo<TSchema, "string">;
    /** The label of the Attio user combobox field */
    label: string;
    /** The optional placeholder text for the Attio user combobox field */
    placeholder?: string;
    /**
     * The optional placeholder text for the search input
     *
     * @default "Search..."
     */
    searchPlaceholder?: string;
    /** Whether the Attio user combobox field is disabled */
    disabled?: boolean;
}) => JSX.Element;
/**
 * A component used to render a collection of inputs.
 */
type Collection<TSchema extends FormSchema, TPath extends PathTo<TSchema, "array">> = (props: {
    /** The label of the collection field */
    label: string;
    /** The path to the value of the collection field, e.g. `"items"` or `"shipping.items"` */
    name: TPath;
    /**
     * A render prop that receives the path and index of one of the items and renders
     * the inputs for that item
     */
    children: (args: {
        path: `${TPath}.${number}`;
        index: number;
    }) => React.ReactNode;
}) => JSX.Element;
/**
 * A component used to group inputs in a collection together
 */
type CollectionItem = (props: {
    /** The label of the collection item */
    label: string;
    /** The inputs of the collection item */
    children: React.ReactNode;
}) => JSX.Element;
/**
 * A submit button for the form.
 *
 * If the form is rendered inside a dialog, the submit button will be placed at the bottom of the dialog.
 */
type SubmitButton = (props: {
    /** The label of the submit button */
    label: string;
}) => JSX.Element;
export interface WithStateProps<TSchema extends FormSchema, TValues extends boolean = false, TSubmitting extends boolean = false, TErrors extends boolean = false> {
    values?: TValues;
    submitting?: TSubmitting;
    errors?: TErrors;
    children: (state: {
        values: TValues extends true ? ValueOf<TSchema> : never;
        submitting: TSubmitting extends true ? boolean : never;
        errors: TErrors extends true ? Record<string, string> : never;
    }) => JSX.Element;
}
/**
 * A component that provides the form state via a render prop.
 *
 * You may specifically request various parts of form state, such as
 * `values`, `submitting`, and `errors`. This component will rerender
 * whenever any of the values requested change.
 */
type WithState<TSchema extends FormSchema> = {
    (props: WithStateProps<TSchema, false, false, false>): JSX.Element;
    (props: WithStateProps<TSchema, true, false, false>): JSX.Element;
    (props: WithStateProps<TSchema, false, true, false>): JSX.Element;
    (props: WithStateProps<TSchema, true, true, false>): JSX.Element;
    (props: WithStateProps<TSchema, false, false, true>): JSX.Element;
    (props: WithStateProps<TSchema, true, false, true>): JSX.Element;
    (props: WithStateProps<TSchema, false, true, true>): JSX.Element;
    (props: WithStateProps<TSchema, true, true, true>): JSX.Element;
};
export interface FormApi<TSchema extends FormSchema> {
    /**
     * Submits the form.
     *
     * This will validate the form and call the `onSubmit` handler.
     */
    submit: () => void;
    /**
     * Changes the value of a field.
     */
    change: <TPath extends PathTo<TSchema, "string" | "number">>(path: TPath, value: ValueOf<TSchema>[TPath]) => void;
    /**
     * The <Form> component to wrap the fields of this form and provide a submit handler.
     */
    Form: Form<TSchema>;
    /**
     * A text input field.
     */
    TextInput: TextInput<TSchema>;
    /**
     * A number input field.
     */
    NumberInput: NumberInput<TSchema>;
    /**
     * A rich text input field.
     */
    RichTextInput: RichTextInput<TSchema>;
    /**
     * A radio group input field.
     */
    Experimental_RadioGroup: RadioGroup<TSchema>;
    /**
     * A checkbox input field.
     */
    Checkbox: Checkbox<TSchema>;
    /**
     * A component for grouping input fields.
     *
     * It will automatically wrap after the third child.
     */
    InputGroup: typeof InputGroup;
    /**
     * A fieldset component that groups related form inputs together with a legend.
     * Can contain either a single RadioGroup or multiple Checkbox inputs, but not mixed.
     *
     * @experimental This component is experimental and should not be used yet.
     */
    Experimental_Fieldset: typeof Fieldset;
    /**
     * A toggle input field.
     */
    Toggle: Toggle<TSchema>;
    /**
     * A date time input field.
     */
    DateTimeInput: DateTimeInput<TSchema>;
    /**
     * A date (YYYY-MM-DD) input field.
     */
    PlainDateInput: PlainDateInput<TSchema>;
    /**
     * A combobox input field.
     */
    Combobox: Combobox<TSchema>;
    /**
     * A Attio user combobox input field.
     */
    AttioUserCombobox: AttioUserCombobox<TSchema>;
    /**
     * A Attio record combobox input field.
     */
    AttioRecordCombobox: AttioRecordCombobox<TSchema>;
    /**
     * A component used to render a collection of inputs.
     */
    Collection: Collection<TSchema, any>;
    /**
     * A component used to group inputs in a collection together.
     */
    CollectionItem: CollectionItem;
    /**
     * A submit button for the form.
     */
    SubmitButton: SubmitButton;
    /**
     * A component that provides the form state via a render prop.
     */
    WithState: WithState<TSchema>;
}
/**
 * Creates a form API for a given schema and initial values.
 *
 * @example
 * ```tsx
 * const api = useForm({
 *   name: Forms.string(),
 *   age: Forms.number(),
 *   isActive: Forms.boolean(),
 *   isExpress: Forms.boolean(),
 * }, {
 *   name: "John",
 *   age: 30,
 *   isActive: true,
 *   isExpress: false,
 * });
 * ```
 */
export declare function useForm<TSchema extends FormSchema>(schema: TSchema, initialValues: Partial<ValueOf<TSchema>>, 
/**
 * Optional function to validate the form.
 *
 * Errors should be returned as a record of field names to error messages.
 * The keys must match the keys of the form schema.
 *
 * Errors can be nested for complex objects. e.g.
 * ```ts
 * {
 *   shipping: {
 *     street: "Street is required"
 *   }
 * }
 * ```
 *
 * Errors given here will be overridden by errors generated by the form schema.
 */
validate?: (values: ValueOf<TSchema>) => ValidationErrors<ValueOf<TSchema>>): FormApi<TSchema>;
export {};
//# sourceMappingURL=use-form.d.ts.map