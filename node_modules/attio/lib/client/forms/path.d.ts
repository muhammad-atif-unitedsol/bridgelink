import type { Prettify } from "../../utils";
import type { AttioRecord } from "../attio-record";
import type { FormArray } from "./array";
import type { FormAttioRecord } from "./attio-record";
import type { FormBoolean } from "./boolean";
import type { FormDateTime } from "./date-time";
import type { FormNumber } from "./number";
import type { FormPlainDate } from "./plain-date";
import type { FormString } from "./string";
type Assert<TCat, TAnimal> = TCat extends TAnimal ? TCat : never;
type Join<A extends string | number | null, B extends string | number> = A extends null ? B : `${A}.${B}`;
export type ValueType = "string" | "number" | "boolean" | "array" | "date-time" | "plain-date" | "attio-record";
export type SchemaNode = FormString<any> | FormNumber<any> | FormBoolean<any> | FormArray<any, any> | FormDateTime<any> | FormPlainDate<any> | FormAttioRecord<any> | {
    type: "object";
};
type PathWithTypeRecursive<TState, TRoot extends string | number | null> = TState extends FormString<any> ? {
    path: TRoot;
    type: "string";
} : TState extends FormBoolean<any> ? {
    path: TRoot;
    type: "boolean";
} : TState extends FormNumber<any> ? {
    path: TRoot;
    type: "number";
} : TState extends FormDateTime<any> ? {
    path: TRoot;
    type: "date-time";
} : TState extends FormPlainDate<any> ? {
    path: TRoot;
    type: "plain-date";
} : TState extends FormAttioRecord<any> ? {
    path: TRoot;
    type: "attio-record";
} : TState extends FormArray<infer TElement, any> ? {
    path: TRoot;
    type: "array";
} | PathWithTypeRecursive<TElement, Join<TRoot, number>> : {
    [K in keyof TState]: K extends string ? PathWithTypeRecursive<TState[K], Join<TRoot, K>> : never;
}[keyof TState];
type PathWithType<TState> = Assert<Prettify<PathWithTypeRecursive<TState, null>>, {
    path: string;
    type: ValueType;
}>;
export type Path<TState> = PathWithType<TState>["path"];
export type PathTo<TState, TType extends ValueType> = Extract<PathWithType<TState>, {
    type: TType;
}>["path"];
export type ValueOf<TState> = TState extends FormString<infer TOptional> ? TOptional extends true ? string | undefined : string : TState extends FormBoolean<infer TOptional> ? TOptional extends true ? boolean | undefined : boolean : TState extends FormNumber<infer TOptional> ? TOptional extends true ? number | undefined : number : TState extends FormDateTime<infer TOptional> ? TOptional extends true ? Date | undefined : Date : TState extends FormPlainDate<infer TOptional> ? TOptional extends true ? string | undefined : string : TState extends FormAttioRecord<infer TOptional, infer TObjectSlug> ? TOptional extends true ? AttioRecord<TObjectSlug> | undefined : AttioRecord<TObjectSlug> : TState extends FormArray<infer TElement, infer TOptional> ? TOptional extends true ? Array<ValueOf<TElement>> | undefined : Array<ValueOf<TElement>> : {
    [K in keyof TState]: K extends string ? ValueOf<TState[K]> : never;
};
export {};
//# sourceMappingURL=path.d.ts.map