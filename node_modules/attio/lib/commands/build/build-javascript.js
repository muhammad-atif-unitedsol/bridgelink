import { complete, isErrored } from "@attio/fetchable-npm";
import { prepareBuildContext } from "../dev/prepare-build-context.js";
export async function buildJavaScript() {
    const buildContextResult = await prepareBuildContext("write-to-disk");
    if (isErrored(buildContextResult)) {
        return buildContextResult;
    }
    const buildContext = buildContextResult.value;
    const buildResult = await buildContext.rebuild();
    const disposeResult = await buildContext.dispose(1_000);
    if (isErrored(disposeResult)) {
        return disposeResult;
    }
    if (isErrored(buildResult)) {
        return buildResult;
    }
    return complete(true);
}
